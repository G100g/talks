<!DOCTYPE html>
<html>
  <head>
    <title>Webpack in a multi page website</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../common/style.css" media="screen">
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Web Push Notifications
## Explained Workflow

---

# Agenda

1. What we are talking about
2. Problems to solve
2. Basic setup
4. Recreate base scope files tree
5. Existing libraries
5. Manage common modules

---
class: center, middle

# Desktop Compatibility 

### Chrome
### Firefox
### Opera

source: http://caniuse.com/#feat=push-api

---
class: center, middle

# Mobile Compatibility 

### Chrome for Android

source: http://caniuse.com/#feat=push-api

---

class: center, middle, warning
# Web Notifications
https://developer.mozilla.org/en-US/docs/Web/API/notification
### vs
# Push Manager
https://developer.mozilla.org/it/docs/Web/API/Push_API

---

class: center
# Agenti coinvolti

.biglist[
## Client
To grant permission and handle subscription

## Service Worker
To handle push notifications events

## Push Server
To dispatch notifications to the Client

## Your own server
To store subscribtions and send notifications
]
---
# Client

- Check for Service Worker and PushManager availability
- Subscribe to Push Notification
- Send subscription to your own server

---
# Subscription object

```json
{   
  "endpoint": "https://fcm.googleapis.com/fcm/send/d30jsbes9EY...",
  "keys":{
      "p256dh":"BCIjRl6EuZG33LSiVnPr_2uFdPikE1Gsv_R-L0A7__TWaG...",
      "auth":"tdkE5LwkRknBHRlp6Cdrww=="
  }
}
```

---

# Manifest.json

Old Chrome need to add gcm_sender_id

---

# userVisibleOnly

## Tell the browser the the messages from push event are only visible by the User

*and is required (for now)*

---

# applicationServerKey

## A public key your own server will use to send messages to client apps via a push server.

*you have to generate your own*

---

# **V**oluntary **AP**plication Server **ID**entification

## defines a handshake between your app server and the push service and allows the push service to confirm which site is sending messages*

**generate once*

source: https://developers.google.com/web/updates/2016/07/web-push-interop-wins

---

# Your own server

.biglist[
## Store Client subscription
## Send notification to Push Server
## Maybe a lot more...
]
---

# Service Worker

- Handle Push events
- Send Local Notification

---
# Push Server

- Receive trigger from your own server
- Send push event to Client
---
class: center, middle, inverse, demo
# References

https://developers.google.com/web/fundamentals/getting-started/codelabs/push-notifications/
---
class: bottom, center
background-image: url(http://www.int33h.com/test/mi/img/preloader/monkeyLoader.gif)

# **The End**

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        highlightLines: true
      });
    </script>
  </body>
</html>
